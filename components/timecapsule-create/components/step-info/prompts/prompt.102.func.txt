아래의 조건을 모두 적용하여, 아래의 요구사항을 모두 구현할 것.
구현 결과를 체크리스트로 반환할 것.

==============================================

조건-커서룰) 아래의 커서룰을 적용하여 작업하고, 이 작업이 끝나면 해당 rules 적용 결과를 체크리스트로 반환할 것.
            - @.cursor/rules/01-common.mdc
            - @.cursor/rules/04-func.mdc

==============================================

조건-피그마) 활용할MCP: CursorTalkToFigmaMCP(채널명: l0itizuw)
조건-피그마) 구현된 컴포넌트 참고 노드ID: 126:488

==============================================

조건-파일경로) 참고할 TSX 파일경로: components/timecapsule/step-info/index.tsx
조건-파일경로) 참고할 CSS 파일경로: components/timecapsule/step-info/styles.ts
조건-파일경로) 구현될 HOOK 파일경로: components/timecapsule/step-info/hooks/usePriceCalculation.ts
조건-파일경로) 구현될 HOOK 파일경로: components/timecapsule/step-info/hooks/useDateSelection.ts
조건-파일경로) 구현될 TYPE 파일경로: components/timecapsule/step-info/types.ts
조건-파일경로) 구현될 CONSTANTS 파일경로: components/timecapsule/step-info/constants.ts

==============================================

핵심요구사항) 병렬처리 구현을 위한 작업 방식 조건
            - 다른 채팅에서 개발중인 파일을 수정 및 삭제 하지 말 것.
            - 기존 UI 구조(index.tsx, styles.ts)는 수정하지 말고, hook과 로직 파일만 추가할 것.

==============================================

핵심요구사항) 타임캡슐 정보 입력 및 가격 계산 기능을 step-by-step으로 구현하고, 적용 결과를 체크리스트로 반환할 것.

            1) 라이브러리 조건
                - 달력: 이미 설치되어있는 react-native-calendars를 사용할 것.
                - 상태관리: React hooks (useState, useCallback, useMemo) 사용할 것.
                - 날짜처리: 이미 설치되어있는 dayjs를 사용할 것.

            2) 유저시나리오 (개봉일 선택)
                1. 4가지 개봉일 옵션 표시
                   - "1주일 후": ₩1,000
                   - "1년 후": ₩5,000
                   - "3년 후": ₩10,000
                   - "직접 선택": 기본 금액 ₩3,000
                2. 옵션 클릭 시 선택 상태 변경
                3. "직접 선택" 클릭 시 달력 바텀시트 표시
                4. 달력에서 날짜 선택
                5. 선택된 날짜에 따라 금액 자동 계산
                   - 1주일 이내: ₩1,000
                   - 1개월 이내: ₩2,000
                   - 3개월 이내: ₩3,000
                   - 6개월 이내: ₩5,000
                   - 1년 이내: ₩8,000
                   - 1년 이상: ₩10,000
                6. 선택 완료 시 바텀시트 닫기 및 가격 반영

            3) 유저시나리오 (인원 설정)
                1. 초기값: 2명
                2. - 버튼 클릭 시 인원 감소 (최소 1명)
                3. + 버튼 클릭 시 인원 증가 (최대 제한 없음)
                4. 인원당 가격: ₩500
                5. 실시간 가격 계산 및 표시
                   - 표시 위치: "최대 인원" 섹션 우측 가격 영역
                   - 예시: 2명 = ₩1,000, 5명 = ₩2,500

            4) 유저시나리오 (이미지 슬롯)
                1. 초기값: 3장
                2. - 버튼 클릭 시 슬롯 감소 (최소 1장)
                3. + 버튼 클릭 시 슬롯 증가 (최대 제한 없음)
                4. 슬롯당 가격: ₩500
                5. 실시간 가격 계산 및 표시
                   - 표시 위치: "이미지 슬롯" 섹션 우측 가격 영역
                   - 예시: 3장 = ₩1,500, 10장 = ₩5,000

            5) 유저시나리오 (추가 옵션)
                1. 옵션 리스트 표시
                   - "음악 파일": +₩1,000
                   - "영상 추가": +₩2,000
                2. 옵션 카드 클릭 시 선택/해제 토글
                3. 선택된 옵션 시각적 표시 (테두리, 배경색 변경)
                4. 선택된 옵션 금액 합산
                5. 실시간 가격 계산 및 표시
                   - 표시 위치: "추가 옵션" 섹션 우측 가격 영역
                   - 예시: 음악만 선택 = ₩1,000, 둘 다 선택 = ₩3,000

            6) 유저시나리오 (총 결제금액)
                1. 모든 항목 금액 실시간 합산
                   - 개봉일 금액
                   - 인원 금액 (인원 수 × ₩500)
                   - 이미지 슬롯 금액 (슬롯 수 × ₩500)
                   - 추가 옵션 금액 (선택된 옵션의 합)
                2. 하단 고정 영역에 총 금액 표시
                3. 금액 변경 시 애니메이션 효과 (선택사항)
                4. "결제하기" 버튼 활성화

==============================================

추가요구사항) 캡슐 이름 입력
            1) 유저시나리오
                - TextInput으로 캡슐 이름 입력
                - 최대 글자 수 제한 (예: 20자)
                - 빈 값 검증 (결제 시)
                - placeholder: "예) 2025년의 우리"

==============================================

추가요구사항) 유효성 검증
            1) 결제하기 버튼 클릭 시 검증
                - 캡슐 이름 필수 입력 확인
                - 개봉일 선택 확인
                - 모든 필수 항목 입력 완료 시에만 다음 단계 이동
                - 미입력 시 알림 표시 (Alert 또는 Toast)

==============================================

구현 가이드라인

1. Constants 파일 생성
   - 파일: components/timecapsule/step-info/constants.ts
   - 가격 정책 상수 정의
     - DATE_PRICE_OPTIONS: 개봉일 옵션별 가격
     - PERSONNEL_UNIT_PRICE: 인원당 가격 (₩500)
     - STORAGE_UNIT_PRICE: 슬롯당 가격 (₩500)
     - ADDITIONAL_OPTIONS: 추가 옵션 정보 및 가격
   - 날짜 계산 상수
     - DATE_RANGES: 날짜 범위별 가격 매핑
   - 검증 규칙
     - MAX_CAPSULE_NAME_LENGTH: 20
     - MIN_PERSONNEL: 1
     - MIN_STORAGE: 1

2. Types 파일 생성
   - 파일: components/timecapsule/step-info/types.ts
   - DateOption: 개봉일 옵션 타입
   - AdditionalOption: 추가 옵션 타입
   - PriceBreakdown: 가격 상세 내역 타입
   - StepInfoFormData: 폼 데이터 타입

3. useDateSelection Hook 구현
   - 파일: components/timecapsule/step-info/hooks/useDateSelection.ts
   - 개봉일 옵션 선택 상태 관리
   - 달력 바텀시트 표시/숨김 상태
   - 직접 선택 시 날짜 계산 로직
   - 선택된 날짜에 따른 가격 계산
   - 반환값:
     - selectedOption: 선택된 옵션
     - selectedDate: 선택된 날짜
     - datePrice: 계산된 가격
     - isCalendarVisible: 달력 표시 여부
     - handleOptionSelect: 옵션 선택 핸들러
     - handleDateSelect: 날짜 선택 핸들러
     - handleCalendarClose: 달력 닫기 핸들러

4. usePriceCalculation Hook 구현
   - 파일: components/timecapsule/step-info/hooks/usePriceCalculation.ts
   - 전체 가격 계산 로직
   - 각 항목별 가격 계산
     - calculatePersonnelPrice(count): 인원 금액
     - calculateStoragePrice(count): 슬롯 금액
     - calculateOptionsPrice(selected): 추가 옵션 금액
   - 총 금액 계산 (useMemo로 최적화)
   - 반환값:
     - personnelPrice: 인원 금액
     - storagePrice: 슬롯 금액
     - optionsPrice: 옵션 금액
     - totalPrice: 총 금액
     - priceBreakdown: 가격 상세 내역

5. 기존 index.tsx 수정
   - hooks import 및 연결
   - 가격 계산 로직 적용
   - 달력 바텀시트 추가 (react-native-calendars 사용)
   - 추가 옵션 선택 상태 관리
   - 실시간 가격 업데이트 반영
   - 결제하기 버튼 핸들러 구현

6. styles.ts 업데이트 (필요시만)
   - 달력 바텀시트 스타일
   - 선택된 옵션 스타일
   - 가격 강조 스타일
   - 애니메이션 스타일 (선택사항)

==============================================

구현 순서

1. Constants 파일 작성 (가격 정책 정의)
2. Types 파일 작성 (타입 정의)
3. useDateSelection Hook 구현
4. usePriceCalculation Hook 구현
5. index.tsx에 hooks 연결
6. 달력 바텀시트 UI 추가
7. 추가 옵션 선택 로직 추가
8. 실시간 가격 계산 적용
9. 유효성 검증 로직 추가
10. 테스트 및 디버깅
11. 체크리스트 작성

==============================================

주의사항

1. 기존 UI 구조 유지
   - index.tsx의 기본 구조는 최대한 유지
   - styles.ts는 필요한 스타일만 추가
   - 새로운 파일(hooks, types, constants)로 로직 분리

2. 성능 최적화
   - useMemo로 가격 계산 최적화
   - useCallback으로 이벤트 핸들러 최적화
   - 불필요한 리렌더링 방지

3. 사용자 경험
   - 실시간 가격 업데이트 (즉각 반응)
   - 명확한 선택 상태 표시
   - 부드러운 애니메이션 (선택사항)
   - 직관적인 에러 메시지

4. 코드 품질
   - TypeScript 타입 안정성
   - 명확한 함수명 및 변수명
   - 주석으로 복잡한 로직 설명
   - 재사용 가능한 함수 작성

5. 달력 구현
   - react-native-calendars 라이브러리 활용
   - 최소 선택 날짜: 오늘 이후
   - 과거 날짜 선택 불가
   - 선택된 날짜 하이라이트

6. 가격 표시
   - 천단위 콤마 표시 (예: ₩5,000)
   - 일관된 통화 형식
   - 0원일 때도 ₩0 표시

==============================================

최종검토 체크리스트

- [ ] 개봉일 선택 시 금액 정확히 계산됨
- [ ] 직접 선택 시 달력 정상 작동
- [ ] 달력에서 날짜 선택 시 금액 자동 계산
- [ ] 인원 증감 시 금액 실시간 업데이트
- [ ] 이미지 슬롯 증감 시 금액 실시간 업데이트
- [ ] 추가 옵션 선택/해제 시 금액 반영
- [ ] 총 결제금액 정확히 합산됨
- [ ] 캡슐 이름 입력 및 검증 작동
- [ ] 결제하기 버튼 유효성 검증 작동
- [ ] TypeScript 타입 에러 0건
- [ ] 성능 최적화 (useMemo, useCallback) 적용
- [ ] 코드 가독성 및 유지보수성 확보

==============================================

수정사항) 2025-12-16 추가 요청사항

1) 최대 인원 제한
   - 인원 설정의 최대값을 10명으로 제한
   - + 버튼 클릭 시 10명까지만 증가 가능
   - 10명 도달 시 + 버튼 비활성화 또는 클릭 무시
   - Constants에 MAX_PERSONNEL: 10 추가

2) 이미지 슬롯 최대 제한
   - 이미지 슬롯의 최대값을 5장으로 제한
   - + 버튼 클릭 시 5장까지만 증가 가능
   - 5장 도달 시 + 버튼 비활성화 또는 클릭 무시
   - Constants에 MAX_STORAGE: 5 추가

3) 개봉일 표시 기능
   - 개봉일 옵션 선택 시 계산된 실제 개봉일을 표시
   - 표시 위치: 선택된 개봉일 옵션 버튼 아래
   - 표시 형식: "YYYY년 MM월 DD일에 개봉됩니다"
   - 예시 케이스:
     - "1주일 후" 선택 시 → 오늘(2025-12-16) + 7일 = "2025년 12월 23일에 개봉됩니다"
     - "1년 후" 선택 시 → 오늘(2025-12-16) + 1년 = "2026년 12월 16일에 개봉됩니다"
     - "3년 후" 선택 시 → 오늘(2025-12-16) + 3년 = "2028년 12월 16일에 개봉됩니다"
     - "직접 선택"으로 2026-01-15 선택 시 → "2026년 01월 15일에 개봉됩니다"
   - dayjs를 사용하여 날짜 계산 및 포맷팅
   - useDateSelection Hook에 formattedOpenDate 반환값 추가

4) 추가 체크리스트 항목
   - [ ] 인원 최대값 10명 제한 정상 작동
   - [ ] 이미지 슬롯 최대값 5장 제한 정상 작동
   - [ ] 개봉일 선택 시 계산된 날짜가 버튼 아래에 표시됨

==============================================
